{"version":3,"sources":["main.js"],"names":["test","navigator","userAgent","window","MSStream","onload","styles","css","document","createElement","type","styleSheet","cssText","appendChild","createTextNode","getElementsByTagName","ImDigits","_state","currentIndex","animating","_getNumsCount","$","length","_getDirection","nextIndex","this","_slideToItem","index","self","prevIndex","$_","$numsCrop","find","$nextPicsItem","eq","$nextNumsItem","$nextTextItem","$nextTextValue","$nextTextDesc","$currPicsItem","$currNumsItem","$currTextItem","$currTextValue","$currTextDesc","$fakeNumsItem","clone","position","offset","left","addClass","appendTo","distance","transform","setTimeout","_moveNumsToItem","parseFloat","removeClass","attr","remove","$items","maxIndex","Math","min","listOffset","i","width","_handleNumClick","e","data","preventDefault","_handlePrevClick","_handleNextClick","_bindUI","on","init","App","_handleDOMReady","WebFont","load","google","families","active","ready","bind"],"mappings":"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","file":"main.min.js","sourcesContent":["/*!\n * THIS FILE IS GENERATED BY GULP PROJECT. \n * NEVER CHANGE IT MANUALLY, OTHERWISE YOUR CHANGES \n * CAN BE OVERWRITTEN. \n * \n * @description \n * @repository git@bitbucket.org:ildar-meyker/html-barsgroup.git\n */\n\n(function () {\n\n\tvar iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n\tif (!iOS) return;\n\n\tfunction appendStyle(styles) {\n\t  var css = document.createElement('style');\n\t  css.type = 'text/css';\n\n\t  if (css.styleSheet) css.styleSheet.cssText = styles;\n\t  else css.appendChild(document.createTextNode(styles));\n\n\t  document.getElementsByTagName(\"head\")[0].appendChild(css);\n\t}\n\n\tvar styles = '* {cursor: pointer; }';\n\n\twindow.onload = function() { appendStyle(styles) };\n\n})();\n\nvar ImDigits = {\n\n\t_state: {\n\t\tcurrentIndex: 0,\n\t\tanimating: false\n\t},\n\n\t_getNumsCount: function () {\n\t\tvar self = this;\n\n\t\treturn $('#im-digits .im-digits__nums__item').length;\n\t},\n\n\t_getDirection: function (nextIndex) {\n\t\tvar self = this;\n\n\t\tvar currentIndex = self._state.currentIndex;\n\t\treturn (nextIndex > currentIndex) ? 'left' : 'right';\n\t},\n\n\t_slideToItem: function (index) {\n\t\tvar self = this;\n\n\t\tif ( self._state.animating ) return;\n\t\tself._state.animating = true;\n\n\t\t// indexes\n\t\tvar prevIndex = self._state.currentIndex;\n\t\tvar nextIndex = index;\n\n\t\t// elements\n\t\tvar $_ = $('#im-digits');\n\t\tvar $numsCrop = $_.find('.im-digits__nums__crop');\n\t\t\n\t\tvar $nextPicsItem = $_.find('.im-digits__pics__item').eq(nextIndex);\n\t\tvar $nextNumsItem = $_.find('.im-digits__nums__item').eq(nextIndex);\n\t\tvar $nextTextItem = $_.find('.im-digits__text__item').eq(nextIndex);\n\t\tvar $nextTextValue = $nextTextItem.find('.im-digits__text__value');\n\t\tvar $nextTextDesc = $nextTextItem.find('.im-digits__text__desc');\n\n\t\tvar $currPicsItem = $_.find('.im-digits__pics__item').eq(prevIndex);\n\t\tvar $currNumsItem = $_.find('.im-digits__nums__item').eq(prevIndex);\n\t\tvar $currTextItem = $_.find('.im-digits__text__item').eq(prevIndex);\n\t\tvar $currTextValue = $currTextItem.find('.im-digits__text__value');\n\t\tvar $currTextDesc = $currTextItem.find('.im-digits__text__desc');\n\n\t\t// direction\n\t\tvar direction = self._getDirection(index);\n\n\t\tswitch (direction) {\n\t\t\tcase 'left': \n\n\t\t\t\t// create fake copy of next num item\n\t\t\t\tvar $fakeNumsItem = $nextNumsItem.clone();\n\t\t\t\tvar position = $nextNumsItem.offset().left - $numsCrop.offset().left;\n\t\t\t\t$fakeNumsItem.addClass('_fixed').css({'left': position}).appendTo($numsCrop);\n\t\t\t\t$nextNumsItem.addClass('_hidden');\n\n\t\t\t\t// get the distance we will animate\n\t\t\t\tvar distance = $fakeNumsItem.offset().left - $nextTextValue.offset().left;\n\t\t\t\t\n\t\t\t\t// set next text value to start position\n\t\t\t\t$nextTextValue.css({'transform': 'translateX(' + distance + 'px)'});\n\n\t\t\t\t// hide things\n\t\t\t\t$currTextDesc.addClass('_fadeOutLeft');\n\t\t\t\t$currTextValue.addClass('_fadeOutLeft');\n\n\t\t\t\t// show things\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$nextPicsItem.addClass('_active _cover _fadeInImage');\n\t\t\t\t\t$nextTextDesc.addClass('_fadeInRight');\n\t\t\t\t\t$nextTextValue.addClass('_ready').css({'transform': 'translateX(0)'});\n\t\t\t\t\t$nextTextItem.addClass('_active');\n\t\t\t\t\t$fakeNumsItem.css({'transform': 'translateX(-' + distance + 'px)'});\n\t\t\t\t\tself._moveNumsToItem(nextIndex);\n\t\t\t\t}, 200);\n\n\t\t\tbreak;\n\t\t\tcase 'right':\n\n\t\t\t\t// create fake copy of next num item\n\t\t\t\tvar $fakeNumsItem = $currNumsItem.clone();\n\t\t\t\tvar position = $currTextValue.offset().left - $numsCrop.offset().left;\n\t\t\t\t$fakeNumsItem.addClass('_fixed').css({'left': position}).appendTo($numsCrop);\n\t\t\t\t$currNumsItem.addClass('_hidden');\n\n\t\t\t\t// get the distance we will animate\n\t\t\t\tvar distance = $numsCrop.offset().left - $currTextValue.offset().left + \n\t\t\t\t\tparseFloat($currNumsItem.css('margin-left'));\n\n\t\t\t\t// hide things\n\t\t\t\t$currTextDesc.addClass('_fadeOutRight');\n\t\t\t\t$currTextValue.addClass('_ready').css({'transform': 'translateX(' + distance + 'px)'});\n\t\t\t\t$fakeNumsItem.css({'transform': 'translateX(' + distance + 'px)'});\n\t\t\t\tself._moveNumsToItem(nextIndex);\n\n\t\t\t\t// show things\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$nextPicsItem.addClass('_active _cover _fadeInImage');\n\t\t\t\t\t$nextTextDesc.addClass('_fadeInLeft');\n\t\t\t\t\t$nextTextValue.addClass('_fadeInLeft');\n\t\t\t\t\t$nextTextItem.addClass('_active');\n\t\t\t\t}, 200);\n\n\t\t\tbreak;\n\t\t}\n\n\t\tsetTimeout(function () {\n\n\t\t\t// clear transition classes\n\t\t\t$currPicsItem.removeClass('_active');\n\t\t\t$currTextItem.removeClass('_active');\n\t\t\t$currTextDesc.removeClass('_fadeOutLeft _fadeOutRight');\n\t\t\t$currTextValue.removeClass('_ready _fadeOutLeft').attr('style', '');\n\t\t\t$currNumsItem.removeClass('_hidden');\n\n\t\t\t$nextPicsItem.removeClass('_cover _fadeInImage');\n\t\t\t$nextTextDesc.removeClass('_fadeInRight _fadeInLeft');\n\t\t\t$nextTextValue.removeClass('_ready _fadeInLeft').attr('style', '');\n\t\t\t$nextNumsItem.removeClass('_hidden');\n\t\t\t\n\t\t\t$fakeNumsItem.remove();\n\n\t\t\t// allow animating\n\t\t\tself._state.animating = false;\n\t\t\tself._state.currentIndex = nextIndex;\n\t\t}, 700);\n\n\t},\n\n\t_moveNumsToItem: function (index) {\n\t\tvar self = this;\n\n\t\t// сложить ширину и отступ всех элементов до текущего \n\t\tvar $items = $('#im-digits .im-digits__nums__item');\n\t\tvar maxIndex = Math.min(index, self._getNumsCount() - 1);\n\t\tvar listOffset = 0;\n\n\t\tfor (var i = 0; i <= maxIndex; i++) {\n\t\t\tlistOffset += parseFloat($items.eq(i).width());\n\t\t\tlistOffset += parseFloat($items.eq(i).css('margin-left'));\n\t\t}\n\t\t\n\t\tvar $list = $('#im-digits .im-digits__nums__list');\n\t\t$list.css({'transform': 'translateX(-' + listOffset + 'px)'});\n\t},\n\n\t_handleNumClick: function (e) {\n\t\tvar self = e.data.self;\n\n\t\te.preventDefault();\n\n\t\tvar nextIndex = $(this).index();\n\t\tself._slideToItem(nextIndex);\n\t},\n\n\t_handlePrevClick: function (e) {\n\t\tvar self = e.data.self;\n\n\t\te.preventDefault();\n\n\t\tvar nextIndex = self._state.currentIndex - 1;\n\n\t\tif (nextIndex < 0) return;\n\t\tself._slideToItem(nextIndex);\n\t},\n\n\t_handleNextClick: function (e) {\n\t\tvar self = e.data.self;\n\n\t\te.preventDefault();\n\n\t\tvar nextIndex = self._state.currentIndex + 1;\n\t\tvar lastIndex = self._getNumsCount() - 1;\n\n\t\tif (nextIndex > lastIndex) return;\n\t\tself._slideToItem(nextIndex);\n\t},\n\n\t_bindUI: function () {\n\t\tvar self = this;\n\n\n\t\t$(document).on('click', '.im-digits__nums__item', {self: self}, self._handleNumClick);\n\t\t$(document).on('click', '.im-digits__prev', {self: self}, self._handlePrevClick);\n\t\t$(document).on('click', '.im-digits__next', {self: self}, self._handleNextClick);\n\t},\n\n\tinit: function () {\n\t\tvar self = this;\n\n\t\tif ( $('#im-digits').length == 0 ) return;\n\n\t\tself._moveNumsToItem(0);\n\t\tself._bindUI();\n\t}\n\n};\nvar App = {\n\n\t_handleDOMReady: function () {\n\t\tvar self = this;\n\t\t\n\t\tWebFont.load({\n\t\t\tgoogle: {\n\t\t\t\tfamilies: ['Open Sans:400,600,700:cyrillic']\n\t\t\t},\n\t\t\tactive: function () {\n\t\t\t\t\n\t\t\t\t// init modules here\n\t\t\t\tImDigits.init();\n\t\t\t}\n\t\t});\n\n\t},\n\n\t_bindUI: function () {\n\t\tvar self = this;\n\n\t\t$(document).ready(self._handleDOMReady.bind(self));\n\t},\n\n\tinit: function () {\n\t\tvar self = this;\n\n\t\tself._bindUI();\n\t}\n};\n\nApp.init();"]}